<div class="container-fluid user-create">
    <div class="user-create-header" >
        <h4>Add new user</h4>
    </div>

    <div class="user-create-body" >
        <form [formGroup]="form">
          <div class="form-wrapper">

              <div class="d-flex flex-row">
                <mat-form-field [ngStyle]="{'width': !!isLoading ? '95%' : '100%'}">
                  <mat-label>Username</mat-label>
                  <input matInput formControlName="username" maxlength="20" minlength="3" type="text" (focusout)="validateUsername()">
                  <mat-error *ngIf="username.invalid">{{ userNameError }}</mat-error>
                </mat-form-field>
                
                <mat-spinner *ngIf="!!isLoading" [diameter]="'30'" class="loader"></mat-spinner>
              </div>
              
              <div class="d-flex flex-md-row flex-column">
                <mat-form-field class="w-md-50 w-100 first-name-input">
                  <mat-label>First name</mat-label>
                  <input matInput type="text" formControlName="firstName">
                  <mat-error *ngIf="firstName.invalid">Name is required</mat-error>
                </mat-form-field>
      
                <mat-form-field class="w-md-50 w-100 last-name-input">
                  <mat-label>Last name</mat-label>
                  <input matInput type="text" formControlName="lastName">
                </mat-form-field>
              </div>
              
              <mat-form-field class="w-100">
                <mat-label>Email</mat-label>
                <input matInput type="email" formControlName="email">
                <mat-error *ngIf="email.invalid">Invalid email</mat-error>
              </mat-form-field>
          </div>

          <div class="d-flex flex-row footer">
            <button mat-raised-button type="button" class="cancel-btn" [routerLink]="['/users']">Cancel</button>
            <button mat-raised-button type="submit" [ngClass]="{'disabled-btn': !form.valid}" [disabled]="!form.valid" (click)="submit()">Add new user</button>
          </div>
        </form>
    </div>
</div>


